name: Trigger Devin on Issue Label

on:
  issues:
    types: [labeled]

jobs:
  trigger-devin:
    if: github.event.label.name == 'devin'
    runs-on: ubuntu-latest
    steps:
      - name: Send to Iris Dashboard
        run: |
          curl -X POST "https://iris-dashboard-iota.vercel.app/api/webhooks/github" \
            -H "Content-Type: application/json" \
            -d '{
              "action": "${{ github.event.action }}",
              "issue": ${{ toJson(github.event.issue) }},
              "label": ${{ toJson(github.event.label) }},
              "repository": ${{ toJson(github.event.repository) }},
              "sender": ${{ toJson(github.event.sender) }}
            }'
